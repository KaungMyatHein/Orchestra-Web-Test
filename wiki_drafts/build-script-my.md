# Build Script မှတ်တမ်း

ဤစာတမ်းသည် `build.js` ဖိုင်အကြောင်း ရှင်းပြထားပါသည်။ ၎င်းသည် ဒီဇိုင်းတိုကင် အကြမ်းထည်များ (JSON ဖိုင်များ) ကို ပလက်ဖောင်းအလိုက် အသုံးပြုနိုင်သော ကုဒ်များ (CSS, TypeScript, Swift, Kotlin, Dart) အဖြစ် ပြောင်းလဲပေးရန် တာဝန်ယူပါသည်။

## အသုံးပြုပုံ

Script ကို ကိုယ်တိုင် run ရန်-

```bash
node build.js [platform]
```

- `platform`: `web`, `android`, `ios`, `flutter`, သို့မဟုတ် `all` ဖြစ်နိုင်ပါသည်။ (မူလသတ်မှတ်ချက်မှာ `web` ဖြစ်သည်)

## Script ဖွဲ့စည်းပုံ

### 1. Helper Functions (အထောက်အကူပြု လုပ်ဆောင်ချက်များ)

- **`toKebabCase` / `toCamelCase` / `toSnakeCase`**: 
  - စာသားများကို ပလက်ဖောင်းအမျိုးမျိုးအတွက် လိုအပ်သော အမည်ပေးပုံစံများသို့ ပြောင်းလဲပေးသည် (ဥပမာ - CSS အတွက် `primary-color`၊ JS/Swift အတွက် `primaryColor`)။

- **`ensureDir`**: 
  - လိုရာခရီး ဖိုင်တွဲ မရှိသေးပါက အသစ်ဖန်တီးပေးသည်။

- **`flattenToMap`**: 
  - အဆင့်ဆင့် ထပ်နေသော object များကို slash (/) ခံထားသော key များ ပါဝင်သည့် single-level map အဖြစ် ဖြန့်ချလိုက်သည်။ Primitive တိုကင်များကို ရှာဖွေရာတွင် အသုံးဝင်သည်။

- **`resolveAlias`**: 
  - `{colors/blue/500}` ကဲ့သို့သော ရည်ညွှန်းချက်များကို primitive map ထဲရှိ ၎င်းတို့၏ တကယ့်တန်ဖိုးများဖြင့် အစားထိုးပေးသည်။

### 2. Platform Writers (ပလက်ဖောင်းအလိုက် ရေးသားသူများ)

Script သည် ပလက်ဖောင်းတစ်ခုချင်းစီအတွက် ကုဒ်ထုတ်လုပ်ရန် သီးခြား function များ သတ်မှတ်ထားပါသည်-

- **`writeWebThemeFiles`**: 
  - CSS variable များပါဝင်သော `.css` ဖိုင်များကို ထုတ်လုပ်သည်။
  - TypeScript constant များပါဝင်သော `.ts` ဖိုင်များကို ထုတ်လုပ်သည်။
  - သက်ဆိုင်ခြင်းမရှိသော ကုဒ်များကို ဖုံးအုပ်သွားခြင်း မဖြစ်စေရန် ရှိပြီးသား variable များကို ထိန်းသိမ်းထားသည်။

- **`writeAndroidThemeFiles`**: 
  - `const val` ဂုဏ်သတ္တိများပါဝင်သော `.kt` (Kotlin) object ကို ထုတ်လုပ်သည်။

- **`writeIOSTokenFiles`**: 
  - `static let` ဂုဏ်သတ္တိများပါဝင်သော `.swift` enum ကို ထုတ်လုပ်သည်။

- **`writeFlutterThemeFiles`**: 
  - `static const` ဂုဏ်သတ္တိများပါဝင်သော `.dart` class ကို ထုတ်လုပ်သည်။

### 3. Main Logic (ပင်မ လုပ်ဆောင်ချက်)

1. **စစ်ဆေးခြင်း**: `tokens` ဖိုင်တွဲ ရှိမရှိ နှင့် JSON ဖိုင်များ ပါမပါ စစ်ဆေးသည်။
2. **ပြင်ဆင်ခြင်း**: ပေးထားသော argument များအပေါ် မူတည်ပြီး ဘယ်ပလက်ဖောင်းအတွက် လုပ်ရမလဲ သတ်မှတ်သည်။
3. **လုပ်ဆောင်ခြင်း**: `.json` ဖိုင် တစ်ခုချင်းစီကို လှည့်လည်လုပ်ဆောင်သည်-
    - **Primitive** (အခြေခံ) နှင့် **Component** (အစိတ်အပိုင်း) collection များကို ခွဲခြားသတ်မှတ်သည်။
    - ရှာဖွေရ လွယ်ကူစေရန် primitive collection ကို ဖြန့်ချလိုက်သည်။
    - Component collection (အမှတ်တံဆိပ်များ/ပုံစံများ) ကို လှည့်လည်လုပ်ဆောင်သည်။
    - Alias များကို ဖြေရှင်းပြီး တိုကင်စာရင်းတစ်ခု ဖန်တီးသည်။
    - ရွေးချယ်ထားသော ပလက်ဖောင်းများအတွက် သက်ဆိုင်ရာ writer function များကို ခေါ်ယူသည်။
